#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
第三章：选择 - 剧情内容（三幕结构版）
"""

from .story_base import StoryScene, StoryChoice

def get_chapter3_content():
    """获取第三章剧情内容"""
    return {
        # 第一幕：观看人生的机会
        "chapter3_choice_intro": StoryScene(
            id="chapter3_choice_intro",
            title="观看人生的机会",
            content=[
                "神秘男子告诉你：\"你有三次机会选择其他世界线上的自己的人生进行观看。\"",
                "\"每次观看结束后，你都有机会选择是否与这个世界的人互换，但只有一次机会。\"",
                "",
                "他指向电台：\"通过调整不同的频率，你可以连接到不同的世界线。\"",
                "\"现在，做出你的第一个选择吧。\"",
                "",
                "你感到既紧张又好奇，不知道会看到什么样的生活。"
            ],
            choices=[
                StoryChoice("选择观看成功的人生", "chapter3_act1_view1"),
                StoryChoice("选择观看被爱的人生", "chapter3_act1_view2"),
                StoryChoice("选择观看平凡的人生", "chapter3_act1_view3")
            ],
            character_id="mysterious_man"
        ),
        
        # 第一幕：第一次观看 - 成功的人生
        "chapter3_act1_view1": StoryScene(
            id="chapter3_act1_view1",
            title="第一次观看·世界线 E（女版的我）",
            content=[
                "【系统提示】",
                "黝黑男子把木箱‘咔哒’一声合上，灯芯应声而灭。黑暗中，只有电台刻度盘亮起幽绿倒计时：",
                "【第一次观看】10:00",
                "【倒计时开始】10——9——8——",
                "男子声音贴耳：‘这回，换个性子，换个皮囊。’",
                "7——6——5——",
                "黑暗像被香水和冷雨同时撕开——我站在一面落地镜前，镜中不是我，却眉眼与我七分像。",
                "【沉浸式加载】",
                "【世界线 E：女版的我】",
                "【UI：同步心率 102】",
                "【UI：自尊值 34%】",
                "——第一人称，正式开始——",
                "【01 学生时代·礼堂后台】",
                "镜子里的‘我’叫 F。十七岁，校裙改短两公分，裙摆扫过膝盖像挑衅。",
                "记忆涌来：",
                "· 成绩中上，却生了一张极好看的脸，情书塞满课桌洞。",
                "· 高傲写在眼角，谁递的情书都懒得拆，只在闺蜜面前点评：‘长得不行。’",
                "· 高考志愿随大流填了省里师范，却想着‘嫁得好也算出路’。",
            ],
            choices=[
                StoryChoice("选择互换", "chapter3_act2_intro", variable_changes={"first_view_choice": "swap"}),
                StoryChoice("放弃互换", "chapter3_act2_intro", variable_changes={"first_view_choice": "stay"})
            ],
            character_id="successful_self"
        ),
        
        # 第一幕：第二次观看 - 被爱的人生
        "chapter3_act1_view2": StoryScene(
            id="chapter3_act1_view2",
            title="第二次观看·世界线 C（叛逆暴富的我）",
            content=[
                "【系统提示】",
                "黝黑男子指尖还在木箱锁孔里，咔哒一声，灯芯再次熄灭。黑暗中，刻度盘幽绿数字像冷焰火炸开：",
                "【第二次观看】10:00",
                "【倒计时开始】10——9——8——",
                "心跳骤然加速，仿佛被注射了肾上腺素。7——6——",
                "男子声音贴耳：‘这一次，别眨眼，钱的味道很呛。’5——4——3——",
                "黑暗被一道刺目的白光劈开——落地窗外的城市夜景扑面而来。",
                "【沉浸式加载】",
                "【世界线 C：叛逆暴富的我】",
                "【UI：同步心率 118】",
                "【UI：焦虑值 71%】",
                "——第一人称，正式开始——",
                "【01 顶楼办公室·午夜】",
                "我站在 28 层的玻璃幕墙前，脚下霓虹像打翻的碎钻。",
                "记忆潮水灌入：",
                "· 高三那年，我逃课、打架、成绩垫底，索性撕了准考证，揣着两百块闯社会。",
                "· 赶上电商红利，从倒卖球鞋到开网店，再到承包直播基地，三十岁出头净资产过亿。",
                "· 市中心大平层、改装 M4、限量手办墙，一键到账。",
                "· 婚姻是花钱摆平的‘合作仪式’，老婆是签约模特，合同三年一续。",
                "· 今晚，为了抢一块新园区的地皮，我回办公室想最后核算报价，门锁落下，世界线卡死。",
                "【02 快进五年】",
                "画面像高速电梯，一层一层掠过。35 岁，体检报告：重度焦虑、中度抑郁、胃早癌病变。",
                "老婆提前启动‘分手条款’，律师函堆成小山。唯一真心对我的狗，误食我的助眠药死了。",
                "员工背地叫我‘冷面周扒皮’，朋友圈直播我 38 岁生日：‘老板疯了，包下酒吧一个人吹蜡烛。’",
                "那天夜里，我站在天台边缘，风把西装吹得猎猎作响。城市灯火在脚下旋转，像一张巨额支票，却找不到收款人。",
                "【03 结局】",
                "深夜，雨。我独自坐在空荡的办公室，落地窗外闪电劈过。手机推送：新园区项目流标，前期垫资 6000 万可能血本无归。",
                "我打开保险柜，里面只剩一张旧照片——高中班级合影，照片里我搂着同桌的肩，笑得像有整个夏天。背面用圆珠笔写着：‘如果当初去读大学，会不会更快乐？’",
                "世界线 C 的最后一幕——我把照片对折，再对折，直到看不见自己的脸。耳边响起自己沙哑的声音：‘原来有钱买得到一切，除了小时候那个夏天。’",
                "【倒计时突兀亮起】",
                "【是否与此人生互换？】YES / NO 10…9…8…",
                "金钱、地位、自由……7…6…",
                "孤独、焦虑、无人可信……5…4…",
                "我闭上眼，想起海边小屋潮水的声音。3…2…",
                "我深吸一口气，手指移开——1…0 默认放弃。",
                "【退出加载】黑暗像潮水退回，煤油灯重新点燃。你跪在地板上，掌心全是汗。神秘男子蹲在电台旁，指尖轻敲木箱：‘第二次放弃。最后一次，给你看点更安静的。’他抬眼，疤痕在火光里像一道裂开的门缝。‘下一次，别再急着说不。’"
            ],
            choices=[
                StoryChoice("选择互换", "chapter3_act2_intro", variable_changes={"second_view_choice": "swap"}),
                StoryChoice("放弃互换", "chapter3_act2_intro", variable_changes={"second_view_choice": "stay"})
            ],
            character_id="rich_self"
        ),
        
        # 第一幕：第三次观看 - 平凡的人生
        "chapter3_act1_view3": StoryScene(
            id="chapter3_act1_view3",
            title="第三次观看·世界线 D（学医回县城的我）",
            content=[
                "【系统提示】",
                "黝黑男子话音刚落，灯芯第三次熄灭。黑暗像一池冰水压下，只剩刻度盘幽绿：",
                "【第三次观看】10:00",
                "【倒计时开始】10——9——8——",
                "男子声音低沉：‘最后一条，最安静，也最难熬。’7——6——5——",
                "黑暗忽被淡蓝色日光灯取代——县医院走廊的尽头，夜班铃‘叮’一声轻响。",
                "【沉浸式加载】",
                "【世界线 D：学医回县城的我】",
                "【UI：同步心率 78】",
                "【UI：疲惫值 68%】",
                "【UI：压抑值 81%】",
                "——第一人称，正式开始——",
                "【01 值班室·除夕前夜】",
                "我坐在值班室的旧木椅上，白大褂口袋里插着半支断墨钢笔。",
                "记忆灌入：",
                "· 当年高考分数够上省内重点医学院，却听父母劝‘学医稳、离家近’，报了五年制临床。",
                "· 毕业托关系回到县医院，一呆就是十年。",
                "· 病人太多，夜班连轴转，晋升卡在主治医师；",
                "· 过年回家，亲戚围着我打转，满脸堆笑：‘大医生，能不能给插个队？能不能给批张转诊？’",
                "· 今晚，为了躲一波又一波的攀人情，我躲进值班室反锁门，世界线被卡死。",
                "【02 快进五年】",
                "画面像老旧投影仪，一格一格跳。38 岁，仍挤在同一间值班室。墙上锦旗褪色，病历夹堆成山。",
                "凌晨三点，急诊送来车祸少年，我跪地 CPR 半小时，少年还是走了。家属在门口哭喊‘医院还我孩子’，我低头写死亡记录，手抖得握不住笔。",
                "回家倒头睡四小时，又被电话叫醒：‘主任……’我望着桌上的晋升申请 ，无语凝噎。仰头凝视着天花板，……之前有那么低吗？",
                "【03 结局】",
                "40 岁生日，没有蛋糕。我独自坐在值班室，泡一碗方便面。医院广播响起：‘请值班医师速到抢救室。’我端起面碗，却听见自己膝盖‘咯’一声脆响。起身那一刻，灯管闪了两下，灭了。",
                "世界线 D 的最后一幕——走廊尽头，少年家属的哭声越来越远，我扶着墙慢慢蹲下，像蹲进一条没有出口的隧道。耳边响起自己沙哑的声音：‘如果当年去大城市闯一闯，会不会……至少能喘口气。’",
                "【倒计时突兀亮起】",
                "【是否与此人生互换？】YES / NO 10…9…8…",
                "没有巨额财富，也没有大起大落，却像温水煮青蛙。7…6…",
                "可至少，我救过人，也被人需要过。5…4…",
                "疲惫、压抑、一眼望到头的日子，却安稳得令人绝望。3…2…",
                "我闭上眼，指尖悬停在空中。1…0 默认放弃。",
                "【退出加载】黑暗像退潮，煤油灯重新点燃。你跪坐在地板上，喉咙干涩。黝黑男子合上木箱，锁舌发出轻响。‘三次机会，全部放弃。’他俯身，疤痕在火光里像一道裂开的门缝。‘现在，只剩下两条路——’他伸手，指向那扇始终锁死的木门。倒计时再次亮起：【最终抉择】1. 接受当下，推门离开。2. 观看全部世界线。10…9…8…"
            ],
            choices=[
                StoryChoice("选择互换", "chapter3_act2_intro", variable_changes={"third_view_choice": "swap"}),
                StoryChoice("放弃互换", "chapter3_act2_intro", variable_changes={"third_view_choice": "stay"})
            ],
            character_id="doctor_self"
        ),

        # 第二幕：抉择与回响
        "chapter3_act2_intro": StoryScene(
            id="chapter3_act2_intro",
            title="第二幕·抉择与回响",
            content=[
                "三次观看结束，煤油灯芯‘啪’地爆出一粒火星，墙上的影子裂成蛛网。你跪坐在地，喉咙干涩。",
                "黝黑男子合上木箱，锁舌发出轻响。‘三次机会，全部放弃。’",
                "他俯身，疤痕在火光里像一道裂开的门缝。‘现在，只剩下两条路——’",
                "他伸手，指向那扇始终锁死的木门。倒计时再次亮起：",
                "【最终抉择】1. 接受当下，推门离开。2. 观看全部世界线。10…9…8…"
            ],
            choices=[
                StoryChoice("接受当下，推门离开", "chapter3_final_accept"),
                StoryChoice("观看全部世界线，再做决定", "chapter3_final_review")
            ],
            character_id="mysterious_man"
        ),

        # 第三幕：最终抉择
        "chapter3_final_accept": StoryScene(
            id="chapter3_final_accept",
            title="第三幕·接受当下",
            content=[
                "你深吸一口气，推开那扇始终锁死的木门。门外是熟悉的海风和晨曦。你回头望去，神秘男子的身影渐渐消散在光里。你明白了：无论哪条世界线，只有自己走过的路才最真实。",
                "【第三章完】"
            ],
            choices=[],
            character_id="protagonist"
        ),

        "chapter3_final_review": StoryScene(
            id="chapter3_final_review",
            title="第三幕·回望所有世界线",
            content=[
                "你闭上眼，脑海中所有世界线的片段交错闪现。每一个自己都在挣扎、选择、后悔，也都在渴望被理解。神秘男子的声音在耳边回响：‘人生没有完美的剧本，只有不断选择的你。’你睁开眼，发现门已悄然打开。你走出小屋，迎向新一天的曙光。",
                "【第三章完】"
            ],
            choices=[],
            character_id="protagonist"
        ),
    }
