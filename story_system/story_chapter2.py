#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
第二章：真相 - 更新版
三幕结构，每幕只能与每个角色连线一次
"""

from .story_base import StoryScene, StoryChoice

def get_chapter2_content():
    """获取第二章剧情内容"""
    return {
        # 第一幕：多重通信
        "chapter2_act1_scene1": StoryScene(
            id="chapter2_act1_scene1",
            title="第一幕：静默的电台",
            content=[
                "煤油灯芯噼啪一声，像替我打破沉默。",
                "我守着电台，掌心全是汗。",
                "刚才貌似有声声贴耳的'姜屿'像钉子一样钉在后脑，难道是幻听？",
                "可屋里除了我，连风都被关在门外。",
                "",
                "我深吸一口气，把旋钮往'RESCUE CHANNEL 7'轻轻回拨半格。",
                "\"……有人吗？\"",
                "静电沙沙，像无数细小的牙齿在啃噬寂静。",
                "几秒后，一个男声穿透电流，带着同样的干涩：\"……听得见，别占线太久。\""
            ],
            choices=[
                StoryChoice("继续与这个声音交谈", "chapter2_act1_contact1"),
                StoryChoice("尝试其他频率", "chapter2_act1_scene2")
            ]
        ),
        
        "chapter2_act1_contact1": StoryScene(
            id="chapter2_act1_contact1",
            title="第一次连线·夜班病房",
            content=[
                "\"我姓……\"我顿住，喉结滚动，\"叫我Y。\"",
                "对面轻笑：\"行，那就叫你Y。我代号L。\"",
                "\"L，你那边能出屋吗？\"",
                "\"病房门锁着，呼叫铃按了没人来。\"",
                "\"病房？\"",
                "\"嗯，单人病房。手背还打着针。\"",
                "他声音低，像怕吵醒谁。",
                "\"你呢？\"他问。",
                "\"海边小屋。\"",
                "\"听着比医院强。\"他干巴巴地笑，\"至少空气里没消毒水味。\"",
                "我问：\"你怎么进来的？\"",
                "\"最后一班护士走后，灯忽然灭了。再睁眼就剩我一个人。\"",
                "沉默几秒，他补一句：\"别问我病床号，我翻了腕带，上面什么字都没有。\"",
                "我想接着问，耳麦里忽然\"滋\"一声。",
                "\"占线超时了。\"L的声音被切断。",
                "电台回到空白的噪音。"
            ],
            choices=[
                StoryChoice("等待下一个声音", "chapter2_act1_scene2"),
                StoryChoice("尝试主动呼叫", "chapter2_act1_scene2")
            ],
            character_id="hospital_patient"
        ),
        
        "chapter2_act1_scene2": StoryScene(
            id="chapter2_act1_scene2",
            title="第二次连线·餐馆卫生间",
            content=[
                "我松开按钮，指节发白。",
                "屋里只剩煤油灯芯的轻爆。",
                "我数了十下，再次按下发射键。",
                "",
                "\"喂？\"",
                "对面先是一阵抽水马桶的轰响，随后是个沙哑的男声：\"……谁？\"",
                "\"我Y。无意冒犯，只想知道你是不是也——\"",
                "\"——被困？是。\"",
                "他语气冲，像刚吵完架。",
                "\"我代号B。\"",
                "\"B，你那边是？\"",
                "\"公共卫生间，单间。\"他压低嗓子，\"门锁拧不开，手机没信号。\"",
                "\"卫生间？\"",
                "\"对，出来喝酒，躲个债，结果门锁像焊死。\"",
                "我试探：\"能描述一下外面？\"",
                "\"流水声，隔壁放着老歌，听不出词。\"",
                "他忽然反问：\"你多大了？\"",
                "我愣住：\"三十出头。\"",
                "\"呵，一样。\"",
                "他顿了半秒，补充：\"我刚才和另一个人连线，对方说他在医院。你们是不是串通好的恶作剧？\"",
                "我苦笑：\"我也想是。\"",
                "噪音骤起，像有人强行切线。",
                "B骂了一句，通讯断了。"
            ],
            choices=[
                StoryChoice("继续监听", "chapter2_act1_scene3"),
                StoryChoice("记录发现", "chapter2_act1_scene3")
            ],
            character_id="restaurant_man"
        ),
        
        "chapter2_act1_scene3": StoryScene(
            id="chapter2_act1_scene3",
            title="第三次连线·值班室",
            content=[
                "我搓了把脸，灯影把影子拉得老长。",
                "旋钮未动，电台却自己跳出轻微'咔哒'一声，像谁替我换频。",
                "",
                "\"……是救援吗？\"",
                "这次声音疲惫，带着一点南方口音。",
                "\"算不上。\"我说，\"我Y，你呢？\"",
                "\"代号D。\"",
                "\"D，你那边？\"",
                "\"医院值班室，门打不开，灯只剩应急灯。\"",
                "我皱眉：\"又一个医院？\"",
                "\"不，这次是县医院。\"他语速慢，\"我刚查完房，回值班室想眯一会儿，门锁就拧不动。\"",
                "我问：\"你穿白大褂？\"",
                "\"嗯，胸前口袋别着钢笔，可标签被撕了。\"",
                "他苦笑：\"刚才和个在餐馆厕所的家伙吵了一架，非说我装神弄鬼。\"",
                "我脑中闪过B的嗓音。",
                "\"你们互相听得到？\"",
                "\"偶尔串线，像老式总机。\"",
                "他停两秒，声音低下去：\"我听那人骂脏话，却感觉像在骂我自己。\"",
                "电流再次淹没他的话。"
            ],
            choices=[
                StoryChoice("继续监听", "chapter2_act1_scene4"),
                StoryChoice("分析线索", "chapter2_act1_scene4")
            ],
            character_id="hospital_doctor"
        ),
        
        "chapter2_act1_scene4": StoryScene(
            id="chapter2_act1_scene4",
            title="第四次连线·顶层办公室",
            content=[
                "灯芯微颤，屋里短暂安静。",
                "旋钮没动，电台却主动切频——这一次，是高跟鞋踩在大理石地面的轻响。",
                "",
                "\"说重点，我只有五分钟。\"",
                "声音干净，带着不容置疑的节奏。",
                "\"我Y。\"",
                "\"代号C。\"",
                "\"你那边？\"",
                "\"顶层办公室，47楼，门被反锁。\"",
                "我呼了口气：\"又是锁。\"",
                "\"锁不是问题，问题是我刚把收购案谈到最关键的数字。\"",
                "他背景里有城市夜色的嗡鸣，像隔着落地窗。",
                "我问：\"你记得怎么进去的？\"",
                "\"回办公室拿文件，门锁自动落栓。\"",
                "他语速极快：\"你们到底是谁？公关团队？竞争对手？\"",
                "\"我也想知道。\"",
                "C冷笑：\"刚才有个女人接入，说她在离婚诉讼，问我能不能投资她律师费。你们剧本挺全面。\"",
                "女人？我心口一紧。",
                "\"她还说什么？\"",
                "\"说——\"",
                "电波音骤然尖锐，像刀片划过玻璃。",
                "C的声音被切成碎片。"
            ],
            choices=[
                StoryChoice("继续监听", "chapter2_act1_scene5"),
                StoryChoice("寻找那个女人", "chapter2_act1_scene5")
            ],
            character_id="ceo_man"
        ),
        
        "chapter2_act1_scene5": StoryScene(
            id="chapter2_act1_scene5",
            title="第五次连线·家中卧室",
            content=[
                "雨声暂歇，煤油灯芯爆了个火星。",
                "我后背发凉。",
                "电台静默十秒，随后一个女声主动穿透噪音。",
                "",
                "\"……喂？\"",
                "声音带着哭腔，却强作镇定。",
                "\"我Y。\"",
                "\"……我代号F。\"",
                "\"F，你那边？\"",
                "\"卧室，门被锁。\"她深呼吸，\"刚开完庭，回家想换衣服，门锁就坏了。\"",
                "\"家里没人？\"",
                "\"有，但他们在楼下，听不见我喊。\"",
                "她的声音轻，像在怕惊动谁。",
                "\"你……多大？\"我问。",
                "\"刚过三十。\"",
                "我喉咙发干。",
                "\"我刚才听到一个男的说，47楼办公室。\"她低声道，\"他提到我？\"",
                "我屏住呼吸。",
                "\"字迹……像谁？\"",
                "她轻声答：\"像我自己，可我不记得我写过。\"",
                "电台里突然传来门把转动的金属声——",
                "\"有人来了。\"",
                "她声音骤停。",
                "断线。"
            ],
            choices=[
                StoryChoice("整理线索", "chapter2_act2_intro"),
                StoryChoice("尝试重新连接", "chapter2_act2_intro")
            ],
            character_id="divorced_woman"
        ),
        
        # 第二幕：真相渐显 - 深入交流发现彼此联系
        "chapter2_act2_intro": StoryScene(
            id="chapter2_act2_intro",
            title="第二幕：真相渐显",
            content=[
                "我僵在原地，耳边回荡五句话——",
                "L：夜班病房，针头，消毒水。",
                "B：餐馆卫生间，欠债，酒味。",
                "D：县医院值班室，撕掉的名牌。",
                "C：47层办公室，收购案，玻璃幕墙。",
                "F：家中卧室，庭审，门锁。",
                "他们年龄都卡在三十上下。",
                "他们都在封闭空间。",
                "他们都在抱怨……",
                "像对着镜子，却照出不同的脸。"
            ],
            choices=[
                StoryChoice("尝试再次联系L", "chapter2_act2_contact1"),
                StoryChoice("尝试再次联系B", "chapter2_act2_contact2")
            ]
        ),
        
        "chapter2_act2_contact1": StoryScene(
            id="chapter2_act2_contact1",
            title="第二次连线·夜班病房·深入",
            content=[
                "我按下发射键，心跳如鼓。",
                "\"L，你还在吗？\"",
                "几秒后，他的声音传来，比之前更低：\"Y，我时间不多。\"",
                "\"我发现了一些事情……\"我犹豫着，\"我们好像……\"",
                "\"好像什么？\"",
                "\"好像都是同一个人。\"",
                "对面沉默良久。",
                "\"我也在想这个问题。\"L轻声说，\"刚才我照镜子，发现左眉有道疤——可我不记得什么时候磕的。\"",
                "\"我这边……\"我咽了口唾沫，\"镜子里的人，好像也在看我。\"",
                "\"我们用的是同一副嗓子。\"L突然说。",
                "电流啪地一下，通讯中断。"
            ],
            choices=[
                StoryChoice("联系B", "chapter2_act2_contact2"),
                StoryChoice("联系D", "chapter2_act2_contact3")
            ],
            character_id="hospital_patient"
        ),
        
        "chapter2_act2_contact2": StoryScene(
            id="chapter2_act2_contact2",
            title="第二次连线·餐馆卫生间·深入",
            content=[
                "\"B？\"我按下发射键。",
                "\"操，又是你。\"他的声音比第一次更哑，\"我他妈忽然想起来——我欠的钱，债主姓姜。\"",
                "我心口被锤了一下。",
                "\"你确定？\"",
                "\"确定。我骂了他一整年。\"",
                "B的声音忽然压低：\"怪得很，我刚才照镜子，发现自己左眉有道疤——可我不记得什么时候磕的。\"",
                "\"我这边……\"我犹豫，\"镜子里的人，好像也在看我。\"",
                "背景里，老式音响切歌——",
                "\"……如果我是你，就不会选这种生活……\"",
                "B猛地收声：\"操，这歌我没点。\"",
                "断线。"
            ],
            choices=[
                StoryChoice("联系D", "chapter2_act2_contact3"),
                StoryChoice("联系C", "chapter2_act2_contact4")
            ],
            character_id="restaurant_man"
        ),
        
        "chapter2_act2_contact3": StoryScene(
            id="chapter2_act2_contact3",
            title="第二次连线·值班室·深入",
            content=[
                "\"D？\"我先开口。",
                "\"嗯。\"他声音比先前更疲惫，\"我翻抽屉，找到一本值班日志。\"",
                "\"写了什么？\"",
                "\"日期对得上，可签名是我自己的笔迹——问题是，我不记得我写过。\"",
                "他翻动纸页：\"最后一页写着：'第17次夜班，别再给前妻发信息了，她不会回。'\"",
                "我心脏猛地被攥住。",
                "\"你也……\"",
                "\"对，我也离了。\"",
                "D的声音低得只剩气音：\"日志里还提到一个'C'，说今晚收购案签字，让我给他留一盒胃药。\"",
                "我背后一凉。",
                "\"C说他47楼。\"",
                "\"对，可我在县医院，离他上千公里。\"",
                "D苦笑：\"除非——我们都不在自己以为的地方。\"",
                "电流突然拉长，像一口气叹到底。"
            ],
            choices=[
                StoryChoice("联系C", "chapter2_act2_contact4"),
                StoryChoice("联系F", "chapter2_act2_contact5")
            ],
            character_id="hospital_doctor"
        ),
        
        "chapter2_act2_contact4": StoryScene(
            id="chapter2_act2_contact4",
            title="第二次连线·顶层办公室·深入",
            content=[
                "\"C？\"",
                "\"Y。\"",
                "他的声音第一次带着颤。",
                "\"我电脑自己开机了。\"",
                "\"写了什么？\"",
                "\"一封辞职信，署我的名字。\"",
                "他咬牙：\"可我没写过。\"",
                "背景里，键盘噼啪，像有人替他打字。",
                "\"还有……\"C深吸一口气，\"我桌上多了一张照片，是我高中集体照，可我从来没见过这张照片——\"",
                "\"照片里有什么？\"",
                "\"我旁边站着个女孩，校服上别着'F'。\"",
                "我喉咙发干。",
                "\"F刚才说她学生时代很受欢迎。\"",
                "C低声骂了一句：\"我他妈不认识她，可我记得她的脸——像每天照镜子。\"",
                "他话没说完，信号忽然被拉远，像整栋大楼瞬间沉入海底。",
                "断线。"
            ],
            choices=[
                StoryChoice("联系F", "chapter2_act2_contact5"),
                StoryChoice("整理所有线索", "chapter2_act3_intro")
            ],
            character_id="ceo_man"
        ),
        
        "chapter2_act2_contact5": StoryScene(
            id="chapter2_act2_contact5",
            title="第二次连线·家中卧室·深入",
            content=[
                "\"F？\"",
                "\"嗯。\"",
                "她鼻音很重，像刚哭过，却带着奇异的平静。",
                "\"我翻抽屉，找到一张旧车票。\"",
                "\"去哪？\"",
                "\"去你所在的那座海滨小镇。\"",
                "我指尖发麻。",
                "\"日期？\"",
                "\"十年前，十月三号。\"",
                "我猛地抬头看向墙上那张泛黄照片——",
                "右下角那行字：",
                "\"给另一个我。——1978.10.3\"",
                "十年，差了一个轮回。",
                "F继续说：\"车票背面，有人写了一句话——\"",
                "她深吸气，像在念墓志铭：",
                "\"'所有门都会锁上，除了你亲自关的那一道。'\"",
                "我心脏停跳一拍。",
                "\"字迹……像谁？\"",
                "她轻声答：\"像我自己，可我不记得我写过。\"",
                "电台里突然传来门把转动的金属声——",
                "\"有人来了。\"",
                "她声音骤停。",
                "断线。"
            ],
            choices=[
                StoryChoice("整理所有线索", "chapter2_act3_intro"),
                StoryChoice("等待神秘人出现", "chapter2_act3_intro")
            ],
            character_id="divorced_woman"
        ),
        
        # 第三幕：真相大白 - 黝黑男子出现揭示真相
        "chapter2_act3_intro": StoryScene(
            id="chapter2_act3_intro",
            title="第三幕：真相大白",
            content=[
                "我盯着电台刻度盘上的绿色指针，它指向'7'，却微微颤动，像下一秒就要折断。",
                "五个声音，五个世界，五个自己。",
                "L：加班住院的自己",
                "B：为爱情放弃事业的自己", 
                "D：听父母话学医的自己",
                "C：叛逆创业成功的自己",
                "F：女版的自己",
                "他们都在三十岁的节点，都困在封闭空间，都在抱怨……",
                "像五面镜子，照出我人生的所有可能。",
                "我伸手，指尖离按钮只剩一厘米——",
                "灯焰忽然拉长，墙上多出一道更深的影子。",
                "那影子轮廓与我同步，却比我慢半拍抬头。",
                "我屏住呼吸。",
                "电台没响。",
                "影子也没动。",
                "但旋钮自己往逆时针方向，轻轻回一格。",
                "仿佛在说：",
                "\"下一次，别先开口。\""
            ],
            choices=[
                StoryChoice("面对黝黑男子", "chapter2_man_appears"),
                StoryChoice("继续探索电台", "chapter2_man_appears")
            ]
        ),
        
        "chapter2_man_appears": StoryScene(
            id="chapter2_man_appears",
            title="神秘男子的出现",
            content=[
                "煤油灯芯'啪'地爆出一粒火星，火光里，一个皮肤黝黑的男子站在门槛内侧。",
                "依旧那身看不出年代的风衣，额角与左颊的疤痕在暗处像两条干涸的河床。",
                "他双手空空，指尖却沾着铁锈般的暗红。",
                "\"别浪费电。\"",
                "声音低而平直，像在陈述天气预报。",
                "我下意识后退，脚跟撞翻椅子。",
                "男子目光落在我的右手——掌心里那道新鲜裂口仍在渗血。",
                "\"伤口不痛，是因为还没真正割到你。\"",
                "他抬手，指向电台。",
                "\"最后一次主动呼叫，问你想问的。",
                "问完，就给你看'理由'。\"",
                "我盯着那张泛黄照片——",
                "照片里的男人眉眼与我九分像，却穿着我从未见过的藏青色老式风衣。",
                "右下角那行钢笔字像刚被雨水晕开：",
                "\"给另一个我。——1978.10.3\"",
                "我指尖刚碰到相框，电台忽然自己亮了一下。",
                "没有声音，只有一串有节奏的电流：",
                "·--· · ·- ····· ··-· ··-·",
                "我把字母在脑中拼出：",
                "P A H U F",
                "……PAH U F？",
                "还是……",
                "FAH UP？",
                "那些代号的首字母连起来——",
                "L、B、D、C、F——",
                "我呼吸发紧，却想不出顺序。",
                "黝黑男子俯身，嘴唇几乎贴到我耳廓：",
                "\"计时，从我数到十开始。\"",
                "他伸出手，疤痕在黑暗中发亮，像一把钝刀。",
                "\"十。\""
            ],
            choices=[
                StoryChoice("询问男子的身份", "chapter3_choice_intro"),
                StoryChoice("质疑他的说法", "chapter2_man_appears")
            ],
            character_id="mysterious_man"
        )
    }
